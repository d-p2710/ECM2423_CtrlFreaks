{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home Page</title>
    <link rel="stylesheet" href="{% static 'app/css/styles.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Outfit">
</head>
<body>
    <header>
        <div class="topnav">
            <a href="{% url 'home' %}">Home</a>
            <a class="active" href="/profile">My Profile</a>
            <a href="{% url 'game_map' %}" class="nav-item nav-link">Challenges</a>
            <a href="{% url 'qr_scanner' %}" class="nav-item nav-link">QR</a>
            <form method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <!--<a class="nav-item nav-link" href="javascript:$('#frm_logout').submit();">Log Out</a>-->
                <button type="submit">Log Out</button>
            </form>
        </div>
        <!-- css formatted display -mm1224 -->
        <div class="item-a">
            <h2><b>My Profile</b></h2>
            <p>This is a dummy profile page perhaps</p>
        </div>
        <div class="container">
            <div class="item-b">
                <h2><b>
                    <!-- profile data (avatar and points) display -->
                    {% for info in data %}
                    <img src="{{ request.user.profile.avatar.url }}" alt="default">
                    You currently have {{ info.points_amount }} points!
                    {% endfor %}
                </b></h2>
            </div>
        </div>
        
        <div class="shop">
            <script>

                function updateAvatarPreview(part, filename) {
                    document.getElementById("avatar-preview-" + part).src = "emoji-assets/" + part + "/" + filename + ".png";
                }

                class TabSwitcher {
                    constructor(currentTab) {
                        this.currentTab = currentTab;
                    }
                    switchTabAuto(tab) {
                        document.getElementById(this.currentTab).style.visibility = "hidden";
                        document.getElementById(tab).style.visibility = "visible";
                        this.currentTab = tab;
                    }

                    switchTabManual(currentTab, newTab) {
                        // used when tab switch has been triggered by reload/a different script
                        // as this.currentTab becomes de-synced
                        document.getElementById(currentTab).style.visibility = "hidden";
                        document.getElementById(newTab).style.visibility = "visible";
                        this.currentTab = newTab;
                    }
                }

                let avatarBuilder = new TabSwitcher("avatar-eyes-tab");
                let pairsGame = new TabSwitcher("start-screen");
                let leaderboard = new TabSwitcher("total");

            </script>
        </div>

        </header>
</body>
</html>